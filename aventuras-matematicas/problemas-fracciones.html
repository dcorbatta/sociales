<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🧠 Problemas con Fracciones - Aventuras Matemáticas</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="fraction-styles.css">
    <style>
        .problem-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            border: 3px solid #ff9800;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .problem-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(255, 152, 0, 0.2);
        }

        .problem-scenario {
            background: linear-gradient(135deg, #fff3e0 0%, #ffcc80 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid #ff9800;
        }

        .scenario-icon {
            font-size: 4rem;
            text-align: center;
            margin-bottom: 20px;
        }

        .problem-text {
            font-size: 1.2rem;
            line-height: 1.6;
            color: #333;
            margin-bottom: 20px;
        }

        .visual-aid {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid #4facfe;
            text-align: center;
        }

        .fraction-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .visual-fraction {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .fraction-display {
            font-size: 2.5rem;
            font-weight: bold;
            color: #ff9800;
            background: rgba(255, 152, 0, 0.1);
            padding: 15px 25px;
            border-radius: 10px;
            border: 2px solid #ff9800;
        }

        .visual-representation {
            display: flex;
            gap: 5px;
            margin: 10px 0;
        }

        .visual-part {
            width: 40px;
            height: 40px;
            border: 2px solid #333;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .visual-part.filled {
            background: #4facfe;
            color: white;
        }

        .visual-part.empty {
            background: #f0f0f0;
            color: #666;
        }

        .solution-steps {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid #4caf50;
        }

        .step-item {
            display: flex;
            align-items: flex-start;
            margin: 15px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .step-item:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateX(10px);
        }

        .step-number {
            background: #4caf50;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-weight: bold;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 5px;
        }

        .step-explanation {
            color: #555;
            line-height: 1.5;
        }

        .answer-section {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }

        .answer-input {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .answer-input input {
            width: 80px;
            padding: 15px;
            font-size: 1.5rem;
            text-align: center;
            border: 2px solid #2196f3;
            border-radius: 10px;
            background: white;
        }

        .fraction-line {
            width: 60px;
            height: 3px;
            background: #333;
            margin: 0 10px;
        }

        .multiple-choice {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .choice-btn {
            background: white;
            border: 2px solid #2196f3;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .choice-btn:hover {
            background: #2196f3;
            color: white;
            transform: scale(1.05);
        }

        .choice-btn.selected {
            background: #2196f3;
            color: white;
        }

        .choice-btn.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .choice-btn.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .hint-section {
            background: linear-gradient(135deg, #fff9c4 0%, #f4e4ba 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border-left: 5px solid #ffc107;
            display: none;
        }

        .hint-section.show {
            display: block;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback-message {
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: bold;
            text-align: center;
            opacity: 0;
            transition: all 0.5s ease;
        }

        .feedback-message.show {
            opacity: 1;
        }

        .feedback-message.success {
            background: linear-gradient(135deg, #c8e6c9, #4caf50);
            color: white;
        }

        .feedback-message.error {
            background: linear-gradient(135deg, #ffcdd2, #f44336);
            color: white;
        }

        .problem-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .category-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .category-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .category-card.food {
            border-color: #ff9800;
            background: linear-gradient(135deg, #fff3e0, #ffcc80);
        }

        .category-card.time {
            border-color: #2196f3;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
        }

        .category-card.money {
            border-color: #4caf50;
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
        }

        .category-card.distance {
            border-color: #9c27b0;
            background: linear-gradient(135deg, #f3e5f5, #e1bee7);
        }

        .category-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .progress-tracker {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .progress-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .difficulty-indicator {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 10px 0;
        }

        .difficulty-star {
            color: #ffc107;
            font-size: 1.2rem;
        }

        .difficulty-star.empty {
            color: #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>🧠 Problemas con Fracciones</h1>
            <div class="score-board">
                <span class="score">🌟 Puntos: <span id="points">0</span></span>
                <span class="level">🎯 Problema: <span id="currentProblem">1</span>/12</span>
            </div>
        </header>

        <main class="main-content">
            <!-- Introducción -->
            <section class="lesson-section">
                <div class="lesson-card">
                    <h2>🌟 ¡Resuelve Problemas de la Vida Real!</h2>
                    <p>Las fracciones están en todas partes: en la cocina, en el tiempo, en el dinero y más. ¡Vamos a resolver problemas divertidos!</p>
                    
                    <div class="problem-categories">
                        <div class="category-card food" onclick="selectCategory('food')">
                            <div class="category-icon">🍕</div>
                            <h4>Comida y Cocina</h4>
                            <p>Pizzas, pasteles y recetas</p>
                        </div>
                        <div class="category-card time" onclick="selectCategory('time')">
                            <div class="category-icon">⏰</div>
                            <h4>Tiempo</h4>
                            <p>Horas, minutos y actividades</p>
                        </div>
                        <div class="category-card money" onclick="selectCategory('money')">
                            <div class="category-icon">💰</div>
                            <h4>Dinero</h4>
                            <p>Compras y ahorros</p>
                        </div>
                        <div class="category-card distance" onclick="selectCategory('distance')">
                            <div class="category-icon">📏</div>
                            <h4>Medidas</h4>
                            <p>Distancias y cantidades</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Problema Actual -->
            <section class="problem-section">
                <div class="problem-card">
                    <div class="difficulty-indicator" id="difficultyStars">
                        <!-- Se generará dinámicamente -->
                    </div>
                    
                    <div class="problem-scenario" id="problemScenario">
                        <div class="scenario-icon" id="scenarioIcon">🍕</div>
                        <div class="problem-text" id="problemText">
                            María tiene una pizza dividida en 8 partes iguales. Se comió 3 partes en el almuerzo y 2 partes en la cena. ¿Qué fracción de la pizza se comió en total?
                        </div>
                    </div>
                    
                    <div class="visual-aid" id="visualAid">
                        <!-- Se generará dinámicamente -->
                    </div>
                    
                    <div class="answer-section">
                        <h4>💡 ¿Cuál es tu respuesta?</h4>
                        <div id="answerInterface">
                            <!-- Se generará dinámicamente según el tipo de problema -->
                        </div>
                        
                        <div class="button-group">
                            <button class="btn-secondary" onclick="showHint()">💡 Pista</button>
                            <button class="btn-primary" onclick="checkAnswer()">✓ Verificar</button>
                            <button class="btn-primary" onclick="showSolution()" style="display: none;" id="solutionBtn">📋 Ver Solución</button>
                        </div>
                    </div>
                    
                    <div class="hint-section" id="hintSection">
                        <h4>💡 Pista:</h4>
                        <p id="hintText"></p>
                    </div>
                    
                    <div class="feedback-message" id="feedback"></div>
                </div>
            </section>

            <!-- Solución Paso a Paso -->
            <section class="solution-section" style="display: none;" id="solutionSection">
                <div class="solution-steps">
                    <h3>📋 Solución Paso a Paso</h3>
                    <div id="solutionSteps">
                        <!-- Se generará dinámicamente -->
                    </div>
                </div>
            </section>

            <!-- Progreso -->
            <section class="progress-section">
                <div class="progress-tracker">
                    <h3>📊 Tu Progreso</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <p>Problemas resueltos: <span id="solvedProblems">0</span>/12</p>
                    <p>Categoría actual: <span id="currentCategory">Comida y Cocina</span></p>
                </div>
            </section>

            <div class="navigation">
                <button class="btn-secondary" onclick="previousProblem()">⬅️ Anterior</button>
                <a href="index.html" class="btn-secondary">🏠 Volver al Menú</a>
                <button class="btn-primary" onclick="nextProblem()">➡️ Siguiente</button>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
    <script>
        let points = 0;
        let currentProblemNum = 1;
        let solvedProblems = 0;
        let selectedCategory = 'food';
        
        const problems = [
            // Problemas de Comida
            {
                category: 'food',
                icon: '🍕',
                difficulty: 2,
                text: 'María tiene una pizza dividida en 8 partes iguales. Se comió 3 partes en el almuerzo y 2 partes en la cena. ¿Qué fracción de la pizza se comió en total?',
                type: 'fraction',
                answer: {num: 5, den: 8},
                hint: 'Suma las partes que se comió: 3 + 2 = 5 partes de 8 total',
                visual: 'pizza',
                steps: [
                    'Identificar: Pizza dividida en 8 partes',
                    'Almuerzo: 3/8 de la pizza',
                    'Cena: 2/8 de la pizza', 
                    'Sumar: 3/8 + 2/8 = 5/8',
                    'Respuesta: 5/8 de la pizza'
                ]
            },
            {
                category: 'food',
                icon: '🎂',
                difficulty: 3,
                text: 'En una fiesta hay un pastel dividido en 12 pedazos. Los niños se comieron 7 pedazos y los adultos 3 pedazos. ¿Qué fracción del pastel queda?',
                type: 'fraction',
                answer: {num: 2, den: 12},
                hint: 'Resta del total: 12 - 7 - 3 = 2 pedazos quedan',
                visual: 'cake',
                steps: [
                    'Total del pastel: 12 pedazos',
                    'Niños comieron: 7 pedazos',
                    'Adultos comieron: 3 pedazos',
                    'Total comido: 7 + 3 = 10 pedazos',
                    'Queda: 12 - 10 = 2 pedazos',
                    'Fracción que queda: 2/12'
                ]
            },
            // Problemas de Tiempo
            {
                category: 'time',
                icon: '⏰',
                difficulty: 2,
                text: 'Juan estudia matemáticas durante 1/4 de hora y ciencias durante 1/2 hora. ¿Cuánto tiempo estudió en total?',
                type: 'fraction',
                answer: {num: 3, den: 4},
                hint: 'Convierte a la misma fracción: 1/4 + 2/4 = 3/4 de hora',
                visual: 'clock',
                steps: [
                    'Matemáticas: 1/4 de hora',
                    'Ciencias: 1/2 de hora = 2/4 de hora',
                    'Sumar: 1/4 + 2/4 = 3/4',
                    'Total: 3/4 de hora'
                ]
            },
            {
                category: 'time',
                icon: '📚',
                difficulty: 3,
                text: 'Ana dedica 2/5 de su tiempo libre a leer y 1/5 a jugar videojuegos. ¿Qué fracción de su tiempo libre usa en estas actividades?',
                type: 'fraction',
                answer: {num: 3, den: 5},
                hint: 'Suma las fracciones: 2/5 + 1/5 = 3/5',
                visual: 'activities',
                steps: [
                    'Tiempo leyendo: 2/5',
                    'Tiempo jugando: 1/5',
                    'Sumar: 2/5 + 1/5 = 3/5',
                    'Total en actividades: 3/5 del tiempo libre'
                ]
            },
            // Problemas de Dinero
            {
                category: 'money',
                icon: '💰',
                difficulty: 2,
                text: 'Carlos tiene $20. Gastó 1/4 de su dinero en dulces y 1/5 en un juguete. ¿Qué fracción de su dinero gastó?',
                type: 'fraction',
                answer: {num: 9, den: 20},
                hint: 'Convierte a denominador común: 1/4 = 5/20 y 1/5 = 4/20',
                visual: 'money',
                steps: [
                    'Dinero total: $20',
                    'Dulces: 1/4 = 5/20',
                    'Juguete: 1/5 = 4/20',
                    'Total gastado: 5/20 + 4/20 = 9/20',
                    'Fracción gastada: 9/20'
                ]
            },
            {
                category: 'money',
                icon: '🛍️',
                difficulty: 3,
                text: 'Sofía ahorra 3/8 de su mesada y gasta 2/8 en libros. Si le quedan $15, ¿cuánto era su mesada total?',
                type: 'multiple',
                answer: 'B',
                choices: ['A) $40', 'B) $48', 'C) $60', 'D) $72'],
                hint: 'Si ahorra 3/8 y gasta 2/8, le quedan 3/8. Si 3/8 = $15, encuentra el total',
                visual: 'savings',
                steps: [
                    'Ahorra: 3/8 de la mesada',
                    'Gasta en libros: 2/8 de la mesada',
                    'Total usado: 3/8 + 2/8 = 5/8',
                    'Le queda: 8/8 - 5/8 = 3/8',
                    'Si 3/8 = $15, entonces 1/8 = $5',
                    'Mesada total: 8 × $5 = $40'
                ]
            }
        ];

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            updateDisplay();
            loadProblem();
        });

        function updateDisplay() {
            document.getElementById('points').textContent = points;
            document.getElementById('currentProblem').textContent = currentProblemNum;
            document.getElementById('solvedProblems').textContent = solvedProblems;
            
            const progress = (solvedProblems / problems.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            const categories = {
                'food': 'Comida y Cocina',
                'time': 'Tiempo',
                'money': 'Dinero',
                'distance': 'Medidas'
            };
            document.getElementById('currentCategory').textContent = categories[selectedCategory];
        }

        function addPoints(amount) {
            points += amount;
            updateDisplay();
            showFloatingPoints(amount);
        }

        function showFloatingPoints(points) {
            const pointsEl = document.createElement('div');
            pointsEl.textContent = `+${points}`;
            pointsEl.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                color: #4caf50;
                font-size: 2rem;
                font-weight: bold;
                pointer-events: none;
                z-index: 1000;
                animation: floatUp 2s ease-out forwards;
            `;
            document.body.appendChild(pointsEl);
            setTimeout(() => pointsEl.remove(), 2000);
        }

        function selectCategory(category) {
            selectedCategory = category;
            
            // Encontrar el primer problema de la categoría
            const categoryProblems = problems.filter(p => p.category === category);
            if (categoryProblems.length > 0) {
                currentProblemNum = problems.indexOf(categoryProblems[0]) + 1;
                loadProblem();
            }
            
            updateDisplay();
        }

        function loadProblem() {
            const problem = problems[currentProblemNum - 1];
            if (!problem) return;
            
            // Actualizar interfaz
            document.getElementById('scenarioIcon').textContent = problem.icon;
            document.getElementById('problemText').textContent = problem.text;
            
            // Mostrar dificultad
            const starsContainer = document.getElementById('difficultyStars');
            starsContainer.innerHTML = '';
            for (let i = 1; i <= 5; i++) {
                const star = document.createElement('span');
                star.className = i <= problem.difficulty ? 'difficulty-star' : 'difficulty-star empty';
                star.textContent = '⭐';
                starsContainer.appendChild(star);
            }
            
            // Generar interfaz de respuesta
            generateAnswerInterface(problem);
            
            // Generar ayuda visual
            generateVisualAid(problem);
            
            // Limpiar estado anterior
            document.getElementById('hintSection').classList.remove('show');
            document.getElementById('feedback').classList.remove('show');
            document.getElementById('solutionSection').style.display = 'none';
            document.getElementById('solutionBtn').style.display = 'none';
        }

        function generateAnswerInterface(problem) {
            const container = document.getElementById('answerInterface');
            
            if (problem.type === 'fraction') {
                container.innerHTML = `
                    <div class="answer-input">
                        <input type="number" id="answerNum" placeholder="?" min="1" max="100">
                        <div class="fraction-line"></div>
                        <input type="number" id="answerDen" placeholder="?" min="1" max="100">
                    </div>
                `;
            } else if (problem.type === 'multiple') {
                container.innerHTML = `
                    <div class="multiple-choice">
                        ${problem.choices.map((choice, i) => `
                            <button class="choice-btn" onclick="selectChoice('${choice[0]}')" data-choice="${choice[0]}">
                                ${choice}
                            </button>
                        `).join('')}
                    </div>
                `;
            }
        }

        function generateVisualAid(problem) {
            const container = document.getElementById('visualAid');
            
            switch(problem.visual) {
                case 'pizza':
                    container.innerHTML = `
                        <h4>🍕 Visualización de la Pizza</h4>
                        <div class="visual-representation">
                            ${Array.from({length: 8}, (_, i) => `
                                <div class="visual-part ${i < 5 ? 'filled' : 'empty'}">
                                    ${i < 3 ? '🌅' : i < 5 ? '🌙' : '⚪'}
                                </div>
                            `).join('')}
                        </div>
                        <p>🌅 = Almuerzo, 🌙 = Cena, ⚪ = No comido</p>
                    `;
                    break;
                case 'cake':
                    container.innerHTML = `
                        <h4>🎂 Visualización del Pastel</h4>
                        <div class="visual-representation">
                            ${Array.from({length: 12}, (_, i) => `
                                <div class="visual-part ${i < 7 ? 'filled' : i < 10 ? 'filled' : 'empty'}" style="width: 30px;">
                                    ${i < 7 ? '👶' : i < 10 ? '👨' : '⚪'}
                                </div>
                            `).join('')}
                        </div>
                        <p>👶 = Niños, 👨 = Adultos, ⚪ = Queda</p>
                    `;
                    break;
                case 'clock':
                    container.innerHTML = `
                        <h4>⏰ Visualización del Tiempo</h4>
                        <div class="fraction-visual">
                            <div class="visual-fraction">
                                ${createFractionHTML(1, 4, 'fraction-proper', 'fraction-blue')}
                                <p>Matemáticas</p>
                            </div>
                            <div style="font-size: 2rem;">+</div>
                            <div class="visual-fraction">
                                ${createFractionHTML(2, 4, 'fraction-proper', 'fraction-blue')}
                                <p>Ciencias</p>
                            </div>
                            <div style="font-size: 2rem;">=</div>
                            <div class="visual-fraction">
                                <span style="font-size: 2rem; color: #666;">?</span>
                                <p>Total</p>
                            </div>
                        </div>
                    `;
                    break;
                default:
                    container.innerHTML = '<p>📊 Usa las pistas para resolver este problema</p>';
            }
        }

        function selectChoice(choice) {
            // Limpiar selecciones anteriores
            document.querySelectorAll('.choice-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Marcar selección actual
            document.querySelector(`[data-choice="${choice}"]`).classList.add('selected');
        }

        function showHint() {
            const problem = problems[currentProblemNum - 1];
            document.getElementById('hintText').textContent = problem.hint;
            document.getElementById('hintSection').classList.add('show');
            addPoints(5);
        }

        function checkAnswer() {
            const problem = problems[currentProblemNum - 1];
            let isCorrect = false;
            
            if (problem.type === 'fraction') {
                const userNum = parseInt(document.getElementById('answerNum').value);
                const userDen = parseInt(document.getElementById('answerDen').value);
                
                if (!userNum || !userDen) {
                    showFeedback('Por favor completa ambos campos', 'error');
                    return;
                }
                
                isCorrect = userNum === problem.answer.num && userDen === problem.answer.den;
            } else if (problem.type === 'multiple') {
                const selected = document.querySelector('.choice-btn.selected');
                if (!selected) {
                    showFeedback('Por favor selecciona una respuesta', 'error');
                    return;
                }
                
                isCorrect = selected.dataset.choice === problem.answer;
                
                // Mostrar respuestas correctas/incorrectas
                document.querySelectorAll('.choice-btn').forEach(btn => {
                    if (btn.dataset.choice === problem.answer) {
                        btn.classList.add('correct');
                    } else if (btn.classList.contains('selected')) {
                        btn.classList.add('incorrect');
                    }
                });
            }
            
            if (isCorrect) {
                showFeedback('¡Excelente! Has resuelto el problema correctamente. 🎉', 'success');
                addPoints(25);
                solvedProblems++;
                updateDisplay();
                
                setTimeout(() => {
                    if (currentProblemNum < problems.length) {
                        nextProblem();
                    } else {
                        alert('¡Felicitaciones! Has completado todos los problemas. 🏆');
                    }
                }, 2000);
            } else {
                showFeedback('Incorrecto. ¡Inténtalo de nuevo o pide una pista!', 'error');
                document.getElementById('solutionBtn').style.display = 'inline-block';
            }
        }

        function showSolution() {
            const problem = problems[currentProblemNum - 1];
            const stepsContainer = document.getElementById('solutionSteps');
            
            stepsContainer.innerHTML = problem.steps.map((step, i) => `
                <div class="step-item">
                    <div class="step-number">${i + 1}</div>
                    <div class="step-content">
                        <div class="step-explanation">${step}</div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('solutionSection').style.display = 'block';
            addPoints(10);
        }

        function showFeedback(message, type) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = message;
            feedback.className = `feedback-message show ${type}`;
            setTimeout(() => feedback.classList.remove('show'), 4000);
        }

        function previousProblem() {
            if (currentProblemNum > 1) {
                currentProblemNum--;
                loadProblem();
                updateDisplay();
            }
        }

        function nextProblem() {
            if (currentProblemNum < problems.length) {
                currentProblemNum++;
                loadProblem();
                updateDisplay();
            }
        }

        // Agregar animación CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes floatUp {
                0% {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                }
                100% {
                    opacity: 0;
                    transform: translate(-50%, -150%) scale(1.5);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
    <script src="fraction-utils.js"></script>
</body>
</html> 