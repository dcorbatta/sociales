<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aventuras en Ciencias Naturales</title>
    <link rel="stylesheet" href="styles.css">
    <style>
      body {
        background: linear-gradient(135deg, #e8f6ef 0%, #f9fbe7 100%);
        font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', Arial, sans-serif;
        font-size: 1.2em;
        color: #222;
        margin: 0;
        padding: 0;
      }
      h1, h2, h3 {
        color: #228B22;
        text-align: center;
        margin-top: 1.2em;
        margin-bottom: 0.5em;
        font-weight: bold;
        letter-spacing: 1px;
      }
      h2 {
        font-size: 2em;
        background: #fffbe7;
        border-radius: 12px;
        padding: 0.3em 0.5em;
        box-shadow: 0 2px 8px #d0e6d0;
        display: inline-block;
      }
      h3 {
        font-size: 1.3em;
        color: #ff9800;
        margin-top: 1.5em;
      }
      .volver-inicio {
        display: block;
        width: fit-content;
        margin: 2em auto 1em auto;
        background: #228B22;
        color: #fff;
        font-size: 1.2em;
        font-weight: bold;
        padding: 0.7em 2em;
        border-radius: 30px;
        text-decoration: none;
        box-shadow: 0 2px 8px #b2dfdb;
        letter-spacing: 1px;
        transition: background 0.2s;
      }
      .volver-inicio:hover {
        background: #43a047;
      }
      .niveles-grid {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 2em;
        margin: 2em 0;
      }
      .tarjeta-nivel {
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 4px 16px #b2dfdb;
        padding: 1.2em 1.2em 1.5em 1.2em;
        max-width: 320px;
        min-width: 220px;
        text-align: center;
        transition: transform 0.2s;
      }
      .tarjeta-nivel:hover {
        transform: scale(1.04);
        box-shadow: 0 8px 24px #a5d6a7;
      }
      .tarjeta-nivel img {
        margin: 0.5em 0 0.7em 0;
        background: #fff;
        border: 3px solid #000;
        border-radius: 12px;
        max-width: 200px;
        max-height: 180px;
        box-shadow: 0 2px 8px #e0e0e0;
      }
      .tarjeta-nivel strong {
        color: #228B22;
        font-size: 1.1em;
      }
      .tarjeta-nivel em {
        color: #888;
        font-size: 0.95em;
      }
      .mermaid {
        background: #fffbe7;
        border-radius: 12px;
        box-shadow: 0 2px 8px #d0e6d0;
        padding: 1em;
        margin: 2em auto;
        max-width: 600px;
      }
      ul { list-style: none; padding: 0; }
      @media (max-width: 700px) {
        .niveles-grid { flex-direction: column; align-items: center; }
        .tarjeta-nivel { max-width: 95vw; }
      }
    </style>
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
    <h1>Aventuras en Ciencias Naturales</h1>
    <a href="index.html" class="volver-inicio">‚¨Ö Volver al inicio</a>
    <section id="niveles-organizacion" style="margin-top: 2em;">
      <h2>Niveles de organizaci√≥n de los seres vivos</h2>
      <p style="text-align:center; font-size:1.1em; background:#fffbe7; border-radius:10px; padding:0.7em 1em; max-width:600px; margin:1em auto 2em auto; box-shadow:0 2px 8px #d0e6d0;">
        <strong>¬øQu√© es un ecosistema?</strong><br>
        Un ecosistema es el lugar donde viven muchos seres vivos (animales, plantas, bacterias, etc.) y se relacionan entre s√≠ y con el ambiente (luz, agua, suelo).
      </p>
      <h3>Niveles de organizaci√≥n</h3>
      <div class="niveles-grid">
        <div class="tarjeta-nivel">
          <strong>Individuo</strong><br>
          <img src="imagenes-naturales/individuo.png" alt="Armadillo solo">
          <div style="margin:0.5em 0 0.2em 0;">Un solo ser vivo.<br><em>(Ejemplo: un armadillo o un √°rbol)</em></div>
        </div>
        <div class="tarjeta-nivel">
          <strong>Especie</strong><br>
          <img src="imagenes-naturales/especie.png" alt="Grupo de la misma especie">
          <div style="margin:0.5em 0 0.2em 0;">Grupo de seres vivos que pueden tener cr√≠as entre s√≠ y dejar descendencia f√©rtil.<br>Los miembros de una especie no pueden tener cr√≠as f√©rtiles con miembros de otras especies (aislamiento reproductivo).<br><em>(Ejemplo: todos los yaguaret√©s, todos los √°rboles de tala)</em></div>
        </div>
        <div class="tarjeta-nivel">
          <strong>Poblaci√≥n</strong><br>
          <img src="imagenes-naturales/poblacion.png" alt="Grupo de carpinchos">
          <div style="margin:0.5em 0 0.2em 0;">Varios individuos de la misma especie juntos en un lugar y tiempo.<br><em>(Ejemplo: varios carpinchos en un r√≠o, o muchos √°rboles de tala en un bosque)</em></div>
        </div>
        <div class="tarjeta-nivel">
          <strong>Comunidad</strong><br>
          <img src="imagenes-naturales/comunidad.png" alt="Bosque comunidad">
          <div style="margin:0.5em 0 0.2em 0;">Diferentes especies (animales y plantas) viviendo juntas e interactuando.<br><em>(Ejemplo: bosque con √°rboles, p√°jaros, insectos, hongos, etc.)</em></div>
        </div>
        <div class="tarjeta-nivel">
          <strong>Ecosistema</strong><br>
          <img src="imagenes-naturales/ecosistema.png" alt="Ecosistema completo">
          <div style="margin:0.5em 0 0.2em 0;">Animales, plantas, agua, suelo y sol.<br><em>(Ejemplo: paisaje completo)</em></div>
        </div>
      </div>
      <div style="max-width: 600px; margin: 2em auto 1em auto; background: #e0f7fa; border-left: 8px solid #228B22; border-radius: 12px; box-shadow: 0 2px 8px #b2dfdb; padding: 1.2em 1.5em; display: flex; align-items: center; gap: 1em;">
        <img src="imagenes-naturales/yaguarete-dato-curioso.png" alt="Yaguaret√© con manchas √∫nicas" style="width: 90px; height: 90px; object-fit: contain; border: 3px solid #000; border-radius: 12px; background: #fff;">
        <div>
          <strong style="color:#228B22; font-size:1.1em;">Dato curioso üêæ</strong><br>
          Cada <b>yaguaret√©</b> es un individuo √∫nico, con su propio patr√≥n de manchas en el pelaje, que lo distingue de los dem√°s. Su comportamiento, como la caza y el cuidado de sus cr√≠as, var√≠a de un individuo a otro.
        </div>
      </div>
      <h3>Cuadro sin√≥ptico visual</h3>
      <div class="mermaid">
        graph TD
          A["Ecosistema"]
          A --> B["Comunidad"]
          B --> C["Poblaci√≥n"]
          C --> D["Especie"]
          D --> E["Individuo"]
          B --> F["Otra poblaci√≥n"]
          B --> G["Otra poblaci√≥n"]
          A --> H["Ambiente (luz, agua, suelo)"]
      </div>
      <h3>¬°Juega y aprende!</h3>
      <div style="max-width: 600px; margin: 1em auto 2em auto; background: #fffbe7; border-left: 8px solid #ff9800; border-radius: 12px; box-shadow: 0 2px 8px #ffe0b2; padding: 1.2em 1.5em;">
        <ol style="font-size:1.08em;">
          <li><b>¬°Detective de especies!</b><br>
            Observa las im√°genes de animales y plantas. ¬øPuedes encontrar dos individuos que sean de la misma especie? ¬øQu√© detalles los hacen parecidos? ¬øY qu√© los hace √∫nicos?
          </li>
          <li><b>Crea tu comunidad</b><br>
            Dibuja una comunidad inventada. Elige al menos 3 especies diferentes (pueden ser animales, plantas o ambos) y dibuja c√≥mo viven juntas. Ponles nombres divertidos.
          </li>
          <li><b>Construye un ecosistema loco</b><br>
            Imagina un lugar fant√°stico (puede ser en la Tierra o en otro planeta). Dibuja qu√© animales, plantas y ambientes tendr√≠a. ¬øC√≥mo se relacionan entre s√≠?
          </li>
          <li><b>Juego de roles</b><br>
            Elige ser un individuo de una especie (por ejemplo, un carpincho, un √°rbol, un p√°jaro). Act√∫a o dibuja c√≥mo ser√≠a tu d√≠a en una poblaci√≥n, en una comunidad y en un ecosistema.
          </li>
        </ol>
      </div>
    </section>
    <section id="juego-detective" style="margin-top: 3em;">
        <h2 style="color:#ff9800;">Juego: ¬°Detective de especies!</h2>
        <p style="text-align:center; font-size:1.1em; background:#e0f7fa; border-radius:10px; padding:0.7em 1em; max-width:600px; margin:1em auto 2em auto; box-shadow:0 2px 8px #b2dfdb;">
          Arrastra cada animal o planta a la caja con el nombre de su especie. ¬°Si aciertas, se quedar√° all√≠! Si te equivocas, vuelve a intentarlo.<br>
          <b>¬øCu√°ntos puedes acertar?</b>
        </p>
        <div id="juego-dragdrop" style="display:flex; flex-direction:column; align-items:center; gap:2em;">
          <div id="imagenes-detective" style="display:flex; flex-wrap:wrap; gap:1.5em; justify-content:center; margin-bottom:2em;">
            <img src="imagenes-naturales/detective/carpincho1.png" alt="Carpincho 1" class="draggable" draggable="true" data-especie="carpincho" style="width:110px; height:110px; background:#fff; border:3px solid #000; border-radius:12px; box-shadow:0 2px 8px #e0e0e0;">
            <img src="imagenes-naturales/detective/carpincho2.png" alt="Carpincho 2" class="draggable" draggable="true" data-especie="carpincho" style="width:110px; height:110px; background:#fff; border:3px solid #000; border-radius:12px; box-shadow:0 2px 8px #e0e0e0;">
            <img src="imagenes-naturales/detective/yaguarete1.png" alt="Yaguaret√© 1" class="draggable" draggable="true" data-especie="yaguarete" style="width:110px; height:110px; background:#fff; border:3px solid #000; border-radius:12px; box-shadow:0 2px 8px #e0e0e0;">
            <img src="imagenes-naturales/detective/yaguarete2.png" alt="Yaguaret√© 2" class="draggable" draggable="true" data-especie="yaguarete" style="width:110px; height:110px; background:#fff; border:3px solid #000; border-radius:12px; box-shadow:0 2px 8px #e0e0e0;">
            <img src="imagenes-naturales/detective/tala1.png" alt="Tala 1" class="draggable" draggable="true" data-especie="tala" style="width:110px; height:110px; background:#fff; border:3px solid #000; border-radius:12px; box-shadow:0 2px 8px #e0e0e0;">
            <img src="imagenes-naturales/detective/tala2.png" alt="Tala 2" class="draggable" draggable="true" data-especie="tala" style="width:110px; height:110px; background:#fff; border:3px solid #000; border-radius:12px; box-shadow:0 2px 8px #e0e0e0;">
            <img src="imagenes-naturales/detective/armadillo.png" alt="Armadillo" class="draggable" draggable="true" data-especie="armadillo" style="width:110px; height:110px; background:#fff; border:3px solid #000; border-radius:12px; box-shadow:0 2px 8px #e0e0e0;">
            <img src="imagenes-naturales/detective/cactus.png" alt="Cactus" class="draggable" draggable="true" data-especie="cactus" style="width:110px; height:110px; background:#fff; border:3px solid #000; border-radius:12px; box-shadow:0 2px 8px #e0e0e0;">
          </div>
          <div id="cajas-especies" style="display:flex; flex-wrap:wrap; gap:2em; justify-content:center;">
            <div class="dropzone" data-especie="carpincho" style="width:160px; min-height:130px; background:#fffbe7; border:3px dashed #228B22; border-radius:14px; display:flex; flex-direction:column; align-items:center; justify-content:center; font-weight:bold; font-size:1.1em; color:#228B22; box-shadow:0 2px 8px #b2dfdb;">Carpincho</div>
            <div class="dropzone" data-especie="yaguarete" style="width:160px; min-height:130px; background:#fffbe7; border:3px dashed #ff9800; border-radius:14px; display:flex; flex-direction:column; align-items:center; justify-content:center; font-weight:bold; font-size:1.1em; color:#ff9800; box-shadow:0 2px 8px #ffe0b2;">Yaguaret√©</div>
            <div class="dropzone" data-especie="tala" style="width:160px; min-height:130px; background:#e8f6ef; border:3px dashed #43a047; border-radius:14px; display:flex; flex-direction:column; align-items:center; justify-content:center; font-weight:bold; font-size:1.1em; color:#43a047; box-shadow:0 2px 8px #b2dfdb;">Tala</div>
            <div class="dropzone" data-especie="armadillo" style="width:160px; min-height:130px; background:#f9fbe7; border:3px dashed #795548; border-radius:14px; display:flex; flex-direction:column; align-items:center; justify-content:center; font-weight:bold; font-size:1.1em; color:#795548; box-shadow:0 2px 8px #d7ccc8;">Armadillo</div>
            <div class="dropzone" data-especie="cactus" style="width:160px; min-height:130px; background:#e0f7fa; border:3px dashed #00bcd4; border-radius:14px; display:flex; flex-direction:column; align-items:center; justify-content:center; font-weight:bold; font-size:1.1em; color:#00bcd4; box-shadow:0 2px 8px #b2ebf2;">Cactus</div>
          </div>
          <div id="feedback-juego" style="margin-top:2em; font-size:1.2em; font-weight:bold; color:#228B22; min-height:2em;"></div>
          <button onclick="reiniciarJuegoDetective()" style="margin-top:1.5em; background:#ff9800; color:#fff; font-size:1.1em; font-weight:bold; padding:0.7em 2em; border:none; border-radius:30px; box-shadow:0 2px 8px #ffe0b2; cursor:pointer;">Reiniciar juego</button>
        </div>
        <audio id="sonido-exito" src="imagenes-naturales/detective/exito.mp3" preload="auto"></audio>
        <audio id="sonido-error" src="imagenes-naturales/detective/error.mp3" preload="auto"></audio>
        <script>
        // Drag & Drop nativo para el juego de detective
        const draggables = document.querySelectorAll('.draggable');
        const dropzones = document.querySelectorAll('.dropzone');
        let dragging = null;
        draggables.forEach(img => {
          img.addEventListener('dragstart', e => {
            dragging = img;
            setTimeout(() => img.style.opacity = '0.5', 0);
          });
          img.addEventListener('dragend', e => {
            dragging = null;
            img.style.opacity = '1';
          });
        });
        dropzones.forEach(zone => {
          zone.addEventListener('dragover', e => {
            e.preventDefault();
            zone.style.background = '#c8e6c9';
          });
          zone.addEventListener('dragleave', e => {
            zone.style.background = '';
          });
          zone.addEventListener('drop', e => {
            e.preventDefault();
            zone.style.background = '';
            if (dragging && dragging.dataset.especie === zone.dataset.especie) {
              zone.appendChild(dragging);
              dragging.setAttribute('draggable', 'false');
              dragging.style.border = '3px solid #43a047';
              animarExito(dragging);
              reproducirSonido('exito');
              mostrarFeedback('¬°Muy bien! Lo lograste.', true);
            } else if (dragging) {
              animarError(dragging);
              reproducirSonido('error');
              mostrarFeedback('Intenta de nuevo. Observa bien la especie.', false);
            }
          });
        });
        function mostrarFeedback(msg, exito) {
          const fb = document.getElementById('feedback-juego');
          fb.textContent = msg;
          fb.style.color = exito ? '#228B22' : '#d32f2f';
        }
        function reiniciarJuegoDetective() {
          const zonaImgs = document.getElementById('imagenes-detective');
          const imgs = document.querySelectorAll('.draggable');
          imgs.forEach(img => {
            img.setAttribute('draggable', 'true');
            img.style.border = '3px solid #000';
            img.classList.remove('anim-exito', 'anim-error');
            zonaImgs.appendChild(img);
          });
          mostrarFeedback('', true);
        }
        function reproducirSonido(tipo) {
          const audio = document.getElementById('sonido-' + tipo);
          if (audio) {
            audio.currentTime = 0;
            audio.play();
          }
        }
        function animarExito(elemento) {
          elemento.classList.remove('anim-error');
          elemento.classList.add('anim-exito');
          setTimeout(() => elemento.classList.remove('anim-exito'), 700);
        }
        function animarError(elemento) {
          elemento.classList.remove('anim-exito');
          elemento.classList.add('anim-error');
          setTimeout(() => elemento.classList.remove('anim-error'), 700);
        }
        </script>
        <style>
        .anim-exito {
          animation: bounce 0.7s;
        }
        @keyframes bounce {
          0% { transform: scale(1); }
          30% { transform: scale(1.2); }
          50% { transform: scale(0.95); }
          70% { transform: scale(1.1); }
          100% { transform: scale(1); }
        }
        .anim-error {
          animation: shake 0.7s;
        }
        @keyframes shake {
          0% { transform: translateX(0); }
          20% { transform: translateX(-10px); }
          40% { transform: translateX(10px); }
          60% { transform: translateX(-10px); }
          80% { transform: translateX(10px); }
          100% { transform: translateX(0); }
        }
        </style>
      </section>
<!-- JUEGO 1: Ordena los niveles -->
<section id="juego-ordena-niveles" style="margin-top: 3em;">
  <h2 style="color:#ff9800;">Juego: Ordena los niveles</h2>
  <p style="text-align:center; font-size:1.1em; background:#e0f7fa; border-radius:10px; padding:0.7em 1em; max-width:600px; margin:1em auto 2em auto; box-shadow:0 2px 8px #b2dfdb;">
    Arrastra las tarjetas para ordenarlas de menor a mayor. Cuando aciertes, se revelar√° el nombre del nivel.<br>
    <b>¬øPuedes lograr la secuencia correcta?</b>
  </p>
  <div id="ordena-niveles-container" style="display:flex; flex-wrap:wrap; gap:1.5em; justify-content:center; margin-bottom:2em;"></div>
  <div id="feedback-ordena" style="margin-top:1em; font-size:1.2em; font-weight:bold; color:#228B22; min-height:2em;"></div>
  <button onclick="reiniciarOrdenaNiveles()" style="margin-top:1.5em; background:#ff9800; color:#fff; font-size:1.1em; font-weight:bold; padding:0.7em 2em; border:none; border-radius:30px; box-shadow:0 2px 8px #ffe0b2; cursor:pointer;">Reiniciar juego</button>
</section>

<!-- JUEGO 2: Clasifica y explica -->
<section id="juego-clasifica" style="margin-top: 3em;">
  <h2 style="color:#43a047;">Juego: Clasifica y explica</h2>
  <p style="text-align:center; font-size:1.1em; background:#fffbe7; border-radius:10px; padding:0.7em 1em; max-width:600px; margin:1em auto 2em auto; box-shadow:0 2px 8px #ffe0b2;">
    Arrastra cada imagen a la caja correcta. Si aciertas, descubrir√°s el nombre de la categor√≠a y una breve explicaci√≥n.<br>
    <b>¬øCu√°ntos puedes clasificar bien?</b>
  </p>
  <div id="clasifica-imagenes" style="display:flex; flex-wrap:wrap; gap:1.5em; justify-content:center; margin-bottom:2em;"></div>
  <div id="clasifica-categorias" style="display:flex; flex-wrap:wrap; gap:2em; justify-content:center;"></div>
  <div id="feedback-clasifica" style="margin-top:1em; font-size:1.2em; font-weight:bold; color:#228B22; min-height:2em;"></div>
  <button onclick="reiniciarClasifica()" style="margin-top:1.5em; background:#43a047; color:#fff; font-size:1.1em; font-weight:bold; padding:0.7em 2em; border:none; border-radius:30px; box-shadow:0 2px 8px #b2dfdb; cursor:pointer;">Reiniciar juego</button>
</section>

<audio id="sonido-exito" src="imagenes-naturales/detective/exito.mp3" preload="auto"></audio>
<audio id="sonido-error" src="imagenes-naturales/detective/error.mp3" preload="auto"></audio>

<script>
// --- JUEGO 1: Ordena los niveles ---
const nivelesData = [
  {img: 'imagenes-naturales/individuo.png', nombre: 'Individuo'},
  {img: 'imagenes-naturales/especie.png', nombre: 'Especie'},
  {img: 'imagenes-naturales/poblacion.png', nombre: 'Poblaci√≥n'},
  {img: 'imagenes-naturales/comunidad.png', nombre: 'Comunidad'},
  {img: 'imagenes-naturales/ecosistema.png', nombre: 'Ecosistema'}
];
let ordenActual = [];
function mezclarArray(arr) {
  return arr.map(v => [Math.random(), v]).sort().map(a => a[1]);
}
function renderOrdenaNiveles() {
  const cont = document.getElementById('ordena-niveles-container');
  cont.innerHTML = '';
  ordenActual.forEach((nivel, idx) => {
    const card = document.createElement('div');
    card.className = 'card-nivel draggable-ordena';
    card.setAttribute('draggable', 'true');
    card.setAttribute('data-idx', idx);
    card.innerHTML = `<img src="${nivel.img}" alt="${nivel.nombre}" style="width:110px; height:110px; background:#fff; border:3px solid #000; border-radius:12px; box-shadow:0 2px 8px #e0e0e0;"><div class="nombre-nivel" style="margin-top:0.5em; font-weight:bold; font-size:1.1em; color:#228B22; opacity:0;">${nivel.nombre}</div>`;
    cont.appendChild(card);
  });
  addDnDOrdena();
}
function addDnDOrdena() {
  let dragSrc = null;
  document.querySelectorAll('.draggable-ordena').forEach(card => {
    card.addEventListener('dragstart', e => {
      dragSrc = card;
      setTimeout(() => card.style.opacity = '0.5', 0);
    });
    card.addEventListener('dragend', e => {
      dragSrc = null;
      card.style.opacity = '1';
    });
    card.addEventListener('dragover', e => e.preventDefault());
    card.addEventListener('drop', e => {
      e.preventDefault();
      if (dragSrc && dragSrc !== card) {
        const idx1 = +dragSrc.dataset.idx;
        const idx2 = +card.dataset.idx;
        [ordenActual[idx1], ordenActual[idx2]] = [ordenActual[idx2], ordenActual[idx1]];
        renderOrdenaNiveles();
        checkOrdenaNiveles();
      }
    });
  });
}
function checkOrdenaNiveles() {
  let correcto = true;
  for (let i = 0; i < nivelesData.length; i++) {
    if (ordenActual[i].nombre !== nivelesData[i].nombre) correcto = false;
  }
  if (correcto) {
    document.querySelectorAll('.nombre-nivel').forEach(el => {
      el.style.opacity = 1;
      el.classList.add('anim-exito');
    });
    reproducirSonido('exito');
    mostrarFeedbackOrdena('¬°Secuencia correcta! ¬°Muy bien!', true);
  } else {
    document.querySelectorAll('.nombre-nivel').forEach(el => el.style.opacity = 0);
    mostrarFeedbackOrdena('Sigue intentando. ¬°Puedes lograrlo!', false);
  }
}
function mostrarFeedbackOrdena(msg, exito) {
  const fb = document.getElementById('feedback-ordena');
  fb.textContent = msg;
  fb.style.color = exito ? '#228B22' : '#d32f2f';
}
function reiniciarOrdenaNiveles() {
  ordenActual = mezclarArray([...nivelesData]);
  renderOrdenaNiveles();
  mostrarFeedbackOrdena('', true);
}
// --- JUEGO 2: Clasifica y explica ---
const clasificaData = [
  {img: 'imagenes-naturales/individuo.png', categoria: 'Individuo', explicacion: 'Un solo ser vivo.'},
  {img: 'imagenes-naturales/especie.png', categoria: 'Especie', explicacion: 'Grupo de seres vivos que pueden tener cr√≠as entre s√≠.'},
  {img: 'imagenes-naturales/poblacion.png', categoria: 'Poblaci√≥n', explicacion: 'Varios individuos de la misma especie juntos.'},
  {img: 'imagenes-naturales/comunidad.png', categoria: 'Comunidad', explicacion: 'Diferentes especies viviendo juntas.'},
  {img: 'imagenes-naturales/ecosistema.png', categoria: 'Ecosistema', explicacion: 'Animales, plantas, agua, suelo y sol.'},
  {img: 'imagenes-naturales/detective/tala1.png', categoria: 'Individuo', explicacion: 'Un solo √°rbol.'},
  {img: 'imagenes-naturales/detective/carpincho1.png', categoria: 'Individuo', explicacion: 'Un solo carpincho.'},
  {img: 'imagenes-naturales/detective/carpincho2.png', categoria: 'Poblaci√≥n', explicacion: 'Varios carpinchos juntos.'},
  {img: 'imagenes-naturales/detective/yaguarete1.png', categoria: 'Especie', explicacion: 'Dos yaguaret√©s de la misma especie.'},
  {img: 'imagenes-naturales/detective/comunidad.png', categoria: 'Comunidad', explicacion: 'Animales y plantas diferentes juntos.'}
];
const categoriasClasifica = ['Individuo', 'Especie', 'Poblaci√≥n', 'Comunidad', 'Ecosistema'];
function renderClasifica() {
  const imgsCont = document.getElementById('clasifica-imagenes');
  imgsCont.innerHTML = '';
  mezclarArray([...clasificaData]).forEach((item, idx) => {
    const img = document.createElement('img');
    img.src = item.img;
    img.alt = item.categoria;
    img.className = 'draggable-clasifica';
    img.setAttribute('draggable', 'true');
    img.setAttribute('data-categoria', item.categoria);
    img.setAttribute('data-explicacion', item.explicacion);
    img.style.width = '110px';
    img.style.height = '110px';
    img.style.background = '#fff';
    img.style.border = '3px solid #000';
    img.style.borderRadius = '12px';
    img.style.boxShadow = '0 2px 8px #e0e0e0';
    imgsCont.appendChild(img);
  });
  const catsCont = document.getElementById('clasifica-categorias');
  catsCont.innerHTML = '';
  const instrucciones = {
    'Individuo': 'ü¶î Un solo ser vivo',
    'Especie': 'üêæ Mismos pero no juntos',
    'Poblaci√≥n': 'ü¶îü¶î Varios iguales juntos',
    'Comunidad': 'üå≥üê¶ Diferentes especies juntas',
    'Ecosistema': 'üåé Todo el ambiente'
  };
  categoriasClasifica.forEach(cat => {
    const box = document.createElement('div');
    box.className = 'dropzone-clasifica';
    box.setAttribute('data-categoria', cat);
    box.style.width = '160px';
    box.style.minHeight = '130px';
    box.style.background = '#fffbe7';
    box.style.border = '3px dashed #43a047';
    box.style.borderRadius = '14px';
    box.style.display = 'flex';
    box.style.flexDirection = 'column';
    box.style.alignItems = 'center';
    box.style.justifyContent = 'center';
    box.style.fontWeight = 'bold';
    box.style.fontSize = '1.1em';
    box.style.color = '#43a047';
    box.style.boxShadow = '0 2px 8px #b2dfdb';
    box.innerHTML = `<div style='font-size:1em; color:#888; margin-bottom:0.3em;'>${instrucciones[cat] || ''}</div><span class="nombre-categoria" style="opacity:0;">${cat}</span><span class="explicacion-categoria" style="opacity:0; font-size:0.95em; color:#888;"></span>`;
    catsCont.appendChild(box);
  });
  addDnDClasifica();
}
function addDnDClasifica() {
  let dragging = null;
  document.querySelectorAll('.draggable-clasifica').forEach(img => {
    img.addEventListener('dragstart', e => {
      dragging = img;
      setTimeout(() => img.style.opacity = '0.5', 0);
    });
    img.addEventListener('dragend', e => {
      dragging = null;
      img.style.opacity = '1';
    });
  });
  document.querySelectorAll('.dropzone-clasifica').forEach(zone => {
    zone.addEventListener('dragover', e => {
      e.preventDefault();
      zone.style.background = '#c8e6c9';
    });
    zone.addEventListener('dragleave', e => {
      zone.style.background = '';
    });
    zone.addEventListener('drop', e => {
      e.preventDefault();
      zone.style.background = '';
      if (dragging && dragging.dataset.categoria === zone.dataset.categoria) {
        zone.appendChild(dragging);
        dragging.setAttribute('draggable', 'false');
        dragging.style.border = '3px solid #43a047';
        zone.querySelector('.nombre-categoria').style.opacity = 1;
        zone.querySelector('.explicacion-categoria').textContent = dragging.dataset.explicacion;
        zone.querySelector('.explicacion-categoria').style.opacity = 1;
        zone.classList.add('anim-exito');
        reproducirSonido('exito');
        mostrarFeedbackClasifica('¬°Correcto! Descubriste la categor√≠a.', true);
      } else if (dragging) {
        animarError(dragging);
        reproducirSonido('error');
        mostrarFeedbackClasifica('Intenta de nuevo. Observa bien la imagen.', false);
      }
    });
  });
}
function mostrarFeedbackClasifica(msg, exito) {
  const fb = document.getElementById('feedback-clasifica');
  fb.textContent = msg;
  fb.style.color = exito ? '#228B22' : '#d32f2f';
}
function reiniciarClasifica() {
  renderClasifica();
  mostrarFeedbackClasifica('', true);
}
// --- Animaciones y sonidos reutilizados ---
function reproducirSonido(tipo) {
  const audio = document.getElementById('sonido-' + tipo);
  if (audio) {
    audio.currentTime = 0;
    audio.play();
  }
}
function animarError(elemento) {
  elemento.classList.remove('anim-exito');
  elemento.classList.add('anim-error');
  setTimeout(() => elemento.classList.remove('anim-error'), 700);
}
// --- Inicializaci√≥n ---
document.addEventListener('DOMContentLoaded', () => {
  reiniciarOrdenaNiveles();
  reiniciarClasifica();
});
</script>
<style>
.card-nivel, .draggable-clasifica {
  cursor: grab;
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 2px 8px #b2dfdb;
  padding: 0.5em;
  text-align: center;
  transition: transform 0.2s;
}
.card-nivel.anim-exito, .dropzone-clasifica.anim-exito {
  animation: bounce 0.7s;
}
@keyframes bounce {
  0% { transform: scale(1); }
  30% { transform: scale(1.2); }
  50% { transform: scale(0.95); }
  70% { transform: scale(1.1); }
  100% { transform: scale(1); }
}
.anim-error {
  animation: shake 0.7s;
}
@keyframes shake {
  0% { transform: translateX(0); }
  20% { transform: translateX(-10px); }
  40% { transform: translateX(10px); }
  60% { transform: translateX(-10px); }
  80% { transform: translateX(10px); }
  100% { transform: translateX(0); }
}
</style>
</body>
</html> 